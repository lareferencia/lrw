import{b as z,c as A}from"./lrhw-chunk-WDMIL27S.js";import{a as P}from"./lrhw-chunk-XINMMKN6.js";import{a as R}from"./lrhw-chunk-VAWPFTT3.js";import{c as _}from"./lrhw-chunk-ASQ5DCDH.js";import{e as S,f as w,g as B,h as L,i as I}from"./lrhw-chunk-BKWN3BBF.js";import{a as T,e as f,f as b,g as h,h as D,j as y,p,q as E,r as m,t as u}from"./lrhw-chunk-FIUMDXQF.js";h();var o=f(D());h();var d=f(D());var t=f(y()),W=({data:x,tabIndex:C})=>{let[e,g]=(0,d.useState)(),s=(0,d.useRef)(null);(0,d.useEffect)(()=>{let r=R(s.current);if(s.current){let l=_(x).map(n=>({name:n.name,value:n.downloads+n.views+n.outlinks,views:n.views,downloads:n.downloads,outlinks:n.outlinks,conversions:n.conversions}));g(l[0]);let v={tooltip:{trigger:"item"},series:[{name:"Eventos totales del pa\xEDs",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:10},label:{show:!0,position:"outer",alignTo:"edge",edgeDistance:0,width:"100",overflow:"truncate",ellipsis:"...",fontWeight:"bold",color:"#395182"},emphasis:{label:{show:!0,fontSize:14,fontWeight:"bold"}},labelLine:{show:!0},data:l}]},i=()=>{r&&r.resize()};return window.addEventListener("resize",i),v&&r.setOption(v),c(r),()=>{window.removeEventListener("resize",i),r.dispose()}}},[C]);let c=r=>{r.on("mouseover",l=>{g(l.data)})};return(0,t.jsxs)(u,{mt:0,children:[(0,t.jsx)(u,{id:"pie-chart",ref:s,height:"400px"}),(0,t.jsxs)(E,{gridTemplateColumns:"repeat(1,1fr)",gap:"2",children:[(0,t.jsx)(p,{display:"flex",alignItems:"center",justifyContent:"center",p:"2",variant:"filled",children:(0,t.jsx)(m,{as:"span",fontWeight:"bold",children:e==null?void 0:e.name})}),(0,t.jsxs)(E,{gridTemplateColumns:"repeat(2,1fr)",gap:"2",children:[(0,t.jsx)(p,{display:"flex",justifyContent:"center",p:"2",variant:"filled",children:(0,t.jsxs)(m,{as:"span",fontSize:"14px",fontWeight:"500",ml:"1rem",children:["Vistas: ",e==null?void 0:e.views]})}),(0,t.jsx)(p,{display:"flex",justifyContent:"center",p:"2",variant:"filled",children:(0,t.jsxs)(m,{as:"span",fontSize:"14px",fontWeight:"500",ml:"1rem",children:["Descargas: ",e==null?void 0:e.downloads]})}),(0,t.jsx)(p,{display:"flex",justifyContent:"center",p:"2",variant:"filled",children:(0,t.jsxs)(m,{as:"span",fontSize:"14px",fontWeight:"500",ml:"1rem",children:["Enlaces: ",e==null?void 0:e.outlinks]})}),(0,t.jsx)(p,{display:"flex",justifyContent:"center",p:"2",variant:"filled",children:(0,t.jsxs)(m,{as:"span",fontSize:"14px",fontWeight:"500",ml:"1rem",children:["Conversiones: ",e==null?void 0:e.conversions]})})]})]})]})};var a=f(y()),U=o.default.lazy(()=>import("./lrhw-chunk-LHKUJQLC.js")),F=({tabIndex:x,startDate:C})=>{let[e,g]=(0,o.useState)(),[s,c]=(0,o.useState)(!1),[r,l]=(0,o.useState)(!1),v=()=>b(void 0,null,function*(){c(!0);try{let i=yield A(z,S,w,C||B,L,I);i.country&&g(i),c(!1)}catch(i){console.log("Error fetching data:",i),l(!0),c(!1)}});return(0,o.useEffect)(()=>{v()},[C]),(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)(P,{}),!s&&!r&&e&&(0,a.jsx)(U,T({},e)),!s&&!r&&e&&(0,a.jsx)(W,{data:e,tabIndex:x}),r&&(0,a.jsx)(u,{children:"Error fetching data"})]})},Q=F;export{Q as default};
