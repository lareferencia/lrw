import{b as A,c as I}from"./lrw-chunk-PMPP2DEO.js";import{a as F}from"./lrw-chunk-PMD4QVPL.js";import{a as R}from"./lrw-chunk-PDOANWUR.js";import{b as P}from"./lrw-chunk-37P3SEBT.js";import{c as U}from"./lrw-chunk-OYZX6EIO.js";import{a as w,e as B,f as L,g as _,h as z}from"./lrw-chunk-MDN7TV55.js";import{a as T,e as l,f as D,g as v,h as S,j as y,p as d,q as x,r as f,t as c}from"./lrw-chunk-ALVAD7IZ.js";v();var o=l(S());v();var m=l(S());var t=l(y()),W=({data:h,tabIndex:u})=>{let[e,C]=(0,m.useState)(),s=(0,m.useRef)(null);(0,m.useEffect)(()=>{let r=R(s.current);if(s.current){let i=U(h).map(a=>({name:a.name,value:a.downloads+a.views+a.outlinks,views:a.views,downloads:a.downloads,outlinks:a.outlinks,conversions:a.conversions}));C(i[0]);let E={tooltip:{trigger:"item"},series:[{name:"Eventos totales del pa\xEDs",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:10},label:{show:!0,position:"outer",alignTo:"edge",edgeDistance:0,width:"100",overflow:"truncate",ellipsis:"...",fontWeight:"bold",color:"#395182"},emphasis:{label:{show:!0,fontSize:14,fontWeight:"bold"}},labelLine:{show:!0},data:i}]},g=()=>{r&&r.resize()};return window.addEventListener("resize",g),E&&r.setOption(E),p(r),()=>{window.removeEventListener("resize",g),r.dispose()}}},[u]);let p=r=>{r.on("mouseover",i=>{C(i.data)})};return(0,t.jsxs)(c,{mt:0,children:[(0,t.jsx)(c,{id:"pie-chart",ref:s,height:"400px"}),(0,t.jsxs)(x,{gridTemplateColumns:"repeat(1,1fr)",gap:"2",children:[(0,t.jsx)(d,{display:"flex",alignItems:"center",justifyContent:"center",p:"2",variant:"filled",children:(0,t.jsx)(f,{as:"span",fontWeight:"bold",children:e==null?void 0:e.name})}),(0,t.jsxs)(x,{gridTemplateColumns:"repeat(2,1fr)",gap:"2",children:[(0,t.jsx)(d,{display:"flex",justifyContent:"center",p:"2",variant:"filled",children:(0,t.jsxs)(f,{as:"span",fontSize:"12px",fontWeight:"semibold",ml:"1rem",children:["Vistas: ",e==null?void 0:e.views]})}),(0,t.jsx)(d,{display:"flex",justifyContent:"center",p:"2",variant:"filled",children:(0,t.jsxs)(f,{as:"span",fontSize:"12px",fontWeight:"semibold",ml:"1rem",children:["Descargas: ",e==null?void 0:e.downloads]})}),(0,t.jsx)(d,{display:"flex",justifyContent:"center",p:"2",variant:"filled",children:(0,t.jsxs)(f,{as:"span",fontSize:"12px",fontWeight:"semibold",ml:"1rem",children:["Enlaces: ",e==null?void 0:e.outlinks]})}),(0,t.jsx)(d,{display:"flex",justifyContent:"center",p:"2",variant:"filled",children:(0,t.jsxs)(f,{as:"span",fontSize:"12px",fontWeight:"semibold",ml:"1rem",children:["Conversiones: ",e==null?void 0:e.conversions]})})]})]})]})};var n=l(y()),N=o.default.lazy(()=>import("./lrw-chunk-OVTUN77N.js")),M=({tabIndex:h,startDate:u})=>{let[e,C]=(0,o.useState)(),[s,p]=(0,o.useState)(!1),[r,i]=(0,o.useState)(!1),g=window[w],a=()=>D(void 0,null,function*(){p(!0);let k=P(g);try{let b=yield I(A,k,B,u||L,_,z);b.country&&C(b),p(!1)}catch(b){console.log("Error fetching data:",b),i(!0),p(!1)}});return(0,o.useEffect)(()=>{a()},[u]),(0,n.jsxs)(n.Fragment,{children:[s&&(0,n.jsx)(F,{}),!s&&!r&&e&&(0,n.jsx)(N,T({},e)),!s&&!r&&e&&(0,n.jsx)(W,{data:e,tabIndex:h}),r&&(0,n.jsx)(c,{children:"Error fetching data"})]})},$=M;export{$ as default};
